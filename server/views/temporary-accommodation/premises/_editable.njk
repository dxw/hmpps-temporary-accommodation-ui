{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/details/macro.njk" import govukDetails %}

{% call govukFieldset({
  legend: {
    text: "What the property address?",
    classes: "govuk-fieldset__legend--m"
  }
}) %}

{{ govukInput({
  label: {
    text: 'Address line 1',
    classes: "govuk-label--s"
  },
  id: "addressLine1",
  name: "addressLine1",
  autocomplete: "address-line1",
  value: addressLine1,
  errorMessage: errors.addressLine1
}) }}

{{ govukInput({
  label: {
    text: "Postcode",
    classes: "govuk-label--s"
  },
  classes: "govuk-input--width-20",
  id: "postcode",
  name: "postcode",
  autocomplete: "postal-code",
  value: postcode,
  errorMessage: errors.postcode
}) }}

{% endcall %}

{{ govukSelect({
  label: {
    text: "What is the local authority?",
    classes: "govuk-label--m"
  },
  items: convertObjectsToSelectOptions(allLocalAuthorities, 'Select a local authority', 'name', 'id', 'localAuthorityAreaId'),
  id: "localAuthorityAreaId",
  name: "localAuthorityAreaId",
  errorMessage: errors.localAuthorityAreaId
}) }}

{{ govukCheckboxes({
  fieldset: {
    legend: {
      text: "Does the property have any of the following attributes?",
      classes: "govuk-fieldset__legend--m"
    }
  },
  hint: {
    text: "Select all that apply"
  },
  items: convertObjectsToCheckboxItems(allCharacteristics, 'name', 'id', 'characteristicIds'),
  id: "characteristicIds",
  name: "characteristicIds[]",
  errorMessage: errors.characteristicIds
}) }}

{% set statusHintText %}
  <p>Select the relevant property status from the list below. The status will be applied to all bedspaces in this property.</p>
  <h4 class="govuk-heading-s">Pending</h4>
  <p>A property has been approved and is in the process of being made ready for bookings.</p>
  <h4 class="govuk-heading-s">Online</h4>
  <p>A property is being used by the service. Selecting this status will make any associated bedspaces available to book.</p>
  <h4 class="govuk-heading-s">Archived</h4>
  <p>A property is not being used by the service. This status should be selected when a contract has ended, for example.</p> 
{% endset %}

{% set statusHint %}
  {{ govukDetails({
    summaryText: "Guidance on statuses",
    html: statusHintText
  }) }}
{% endset %}

{{ govukRadios({
  fieldset: {
    legend: {
      text: "What is the status of this property?",
      classes: "govuk-fieldset__legend--m"
    }
  },
  hint: {
    html: statusHint
  },
  items: convertObjectsToRadioItems(allStatuses, 'name', 'id', 'status'),
  idPrefix: "status",
  name: "status",
  errorMessage: errors.status
}) }}

{{ govukTextarea({
  label: {
    text: "Please provide any further property details",
    classes: "govuk-label--m"
  },
  hint: {
    text: "This information will be used to help find a suitable property for the person on probation"
  },
  id: "notes",
  name: "notes",
  value: notes,
  errorMessage: errors.notes
}) }}

{{ govukButton({
  text: "Submit"
}) }}
